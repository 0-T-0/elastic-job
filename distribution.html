<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Elastic-job by dangdangdotcom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Elastic-job</h1>
      <h2 class="project-tagline">Elastic-Job is a distributed scheduled job framework, based on Quartz and Curator.</h2>
      <a href="https://github.com/dangdangdotcom/elastic-job" class="btn">View on GitHub</a>
      <a href="https://github.com/dangdangdotcom/elastic-job/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dangdangdotcom/elastic-job/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
<h2>
<a  class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>何为分布式作业？</h2>

<ul>
<li>
<p><strong>分片概念</strong></p>
<p>任务的分布式执行，需要将一个任务拆分为n个独立的任务项，然后由分布式的服务器分别执行某一个或几个分片项。</p>
<p>例如：有一个遍历数据库某张表的作业，现有2台服务器。为了快速的执行作业，那么每台服务器应执行作业的50%。<br />
   为满足此需求，可将作业分成2片，每台服务器执行1片。作业遍历数据的逻辑应为：服务器A遍历ID以奇数结尾的数据；服务器B遍历ID以偶数结尾的数据。<br />
   如果分成10片，则作业遍历数据的逻辑应为：每片分到的分片项应为ID%10，而服务器A被分配到分片项0,1,2,3,4；服务器B被分配到分片项5,6,7,8,9，直接的结果就是服务器A遍历ID以0-4结尾的数据；服务器B遍历ID以5-9结尾的数据。</p>
</li>
<li>
<p><strong>分片项与业务处理解耦</strong></p>
<p>Elastic-job并不直接提供数据处理的功能，框架只会将分片项分配至各个运行中的作业服务器，开发者需要自行处理分片项与真实数据的对应关系。</p>
</li>
<li>
<p><strong>分布式作业的执行</strong></p>
<p>Elastic-job并无作业调度中心节点，而是基于部署作业框架的程序在到达相应时间点时各自触发调度。</p>
<p>注册中心仅用于作业注册和监控信息存储。而主作业节点仅用于处理分片和清理等功能。</p>
</li>
<li>
<p><strong>个性化参数的适用场景</strong></p>
<p>个性化参数即shardingItemParameters，可以和分片项匹配对应关系，用于将分片项的数字转换为更加可读的业务代码。</p>
<p>例如：按照地区水平拆分数据库，数据库A是北京的数据；数据库B是上海的数据；数据库C是广州的数据。<br />
   如果仅按照分片项配置，开发者需要了解0表示北京；1表示上海；2表示广州。<br />
   合理使用个性化参数可以让代码更可读，如果配置为<strong>0=北京,1=上海,2=广州</strong>，那么代码中直接使用北京，上海，广州的枚举值即可完成分片项和业务逻辑的对应关系。
</p>
</li>
<li>
<p><strong>作业高可用</strong></p>
<p>Elastic-job提供最安全的方式执行作业。将分片项设置为1，并使用多于1台的服务器执行作业，作业将会以1主n从的方式执行。</p>
<p>
   一旦执行作业的服务器崩溃，等待执行的服务器将会在下次作业启动时替补执行。<br />
   开启失效转移功能效果更好，可以保证在本次作业执行时崩溃，备机立即启动替补执行。
</p>
</li>
<li>
<p><strong>最大限度利用资源</strong></p>
<p>Elastic-job也提供最灵活的方式，最大限度的提高执行作业的吞吐量。将分片项设置为大于服务器的数量，最好是大于服务器倍数的数量，作业将会合理的利用分布式资源，动态的分配分片项。</p>
<p>例如：3台服务器，分成10片，则分片项分配结果为<strong>服务器A=0,1,2;服务器B=3,4,5;服务器C=6,7,8,9</strong>。<br />
   如果服务器C崩溃，则分片项分配结果为<strong>服务器A=0,1,2,3,4;服务器B=5,6,7,8,9</strong>。在不丢失分片项的情况下，最大限度的利用现有资源提高吞吐量。
</p>
</li>
</ul>
      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dangdangdotcom/elastic-job">Elastic-job</a> is maintained by <a href="https://github.com/dangdangdotcom">dangdangdotcom</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("elastic-job");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
