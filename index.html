<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Elastic-job by dangdangdotcom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Elastic-job</h1>
      <h2 class="project-tagline">Elastic-Job is a distributed scheduled job framework, based on Quartz and Curator.</h2>
      <a href="https://github.com/dangdangdotcom/elastic-job" class="btn">View on GitHub</a>
      <a href="https://github.com/dangdangdotcom/elastic-job/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dangdangdotcom/elastic-job/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>
<a id="elastic-job---distributed-scheduled-job-solution" class="anchor" href="#elastic-job---distributed-scheduled-job-solution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Elastic-Job - distributed scheduled job solution</h2>

<p>Elastic-Job是ddframe中dd-job的作业模块中分离出来的分布式弹性作业框架。去掉了和dd-job中的监控和ddframe接入规范部分。</p>

<p>ddframe其他模块也有可独立开源的部分，之前当当曾开源过dd-soa的基石模块DubboX。</p>

<p>elastic-job和ddframe关系见下图</p>

<p><img src="http://static.oschina.net/uploads/space/2015/0915/181703_2fxp_719192.jpg" alt="ddframe演进图"></p>

<h2>
<a id="主要贡献者" class="anchor" href="#%E4%B8%BB%E8%A6%81%E8%B4%A1%E7%8C%AE%E8%80%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>主要贡献者</h2>

<ul>
<li>张亮 <a href="http://www.dangdang.com/">当当网</a> <a href="mailto:zhangliang@dangdang.com">zhangliang@dangdang.com</a>
</li>
<li>曹昊 <a href="http://www.dangdang.com/">当当网</a> <a href="mailto:caohao@dangdang.com">caohao@dangdang.com</a>
</li>
<li>江树建 <a href="http://www.dangdang.com/">当当网</a> <a href="mailto:jiangshujian@dangdang.com">jiangshujian@dangdang.com</a>
</li>
</ul>

<h2>
<a id="elastic-job主要功能" class="anchor" href="#elastic-job%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD" aria-hidden="true"><span class="octicon octicon-link"></span></a>Elastic-Job主要功能</h2>

<ul>
<li>
<strong>定时任务：</strong> 基于成熟的定时任务作业框架Quartz cron表达式执行定时任务。</li>
<li>
<strong>作业注册中心：</strong> 基于Zookeeper和其客户端Curator实现的全局作业注册控制中心。用于注册，控制和协调分布式作业执行。</li>
<li>
<strong>作业分片：</strong> 将一个任务分片成为多个小任务项在多服务器上同时执行。</li>
<li>
<strong>弹性扩容缩容：</strong> 运行中的作业服务器崩溃，或新增加n台作业服务器，作业框架将在下次作业执行前重新分片，不影响当前作业执行。</li>
<li>
<strong>支持多种作业执行模式：</strong> 支持OneOff，Perpetual和SequencePerpetual三种作业模式。</li>
<li>
<strong>失效转移：</strong> 运行中的作业服务器崩溃不会导致重新分片，只会在下次作业启动时分片。启用失效转移功能可以在本次作业执行过程中，监测其他作业服务器空闲，抓取未完成的孤儿分片项执行。</li>
<li>
<strong>运行时状态收集：</strong> 监控作业运行时状态，统计最近一段时间处理的数据成功和失败数量，记录作业上次运行开始时间，结束时间和下次运行时间。</li>
<li>
<strong>作业停止，恢复和禁用：</strong>用于操作作业启停，并可以禁止某作业运行（上线时常用）。</li>
<li>
<strong>被错过执行的作业重触发：</strong>自动记录错过执行的作业，并在上次作业完成后自动触发。可参考Quartz的misfire。</li>
<li>
<strong>多线程快速处理数据：</strong>使用多线程处理抓取到的数据，提升吞吐量。</li>
<li>
<strong>幂等性：</strong>重复作业任务项判定，不重复执行已运行的作业任务项。由于开启幂等性需要监听作业运行状态，对瞬时反复运行的作业对性能有较大影响。</li>
<li>
<strong>容错处理：</strong>作业服务器与Zookeeper服务器通信失败则立即停止作业运行，防止作业注册中心将失效的分片分项配给其他作业服务器，而当前作业服务器仍在执行任务，导致重复执行。</li>
<li>
<strong>Spring支持：</strong>支持spring容器，自定义命名空间，支持占位符。</li>
<li>
<strong>运维平台：</strong>提供运维界面，可以管理作业和注册中心。</li>
</ul>

<h2>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Start</h2>

<ul>
<li>
<p><strong>目录结构说明</strong></p>

<p><strong>elastic-job-platform：</strong>maven版本依赖模块，编译elastic-job主项目前需先编译本项目。</p>

<p><strong>elastic-job-core：</strong>elastic-job核心模块，只通过Quartz和Curator就可执行分布式作业。</p>

<p><strong>elastic-job-spring：</strong>elastic-job对spring支持的模块，包括命名空间，依赖注入，占位符等。</p>

<p><strong>elastic-job-console：</strong>elastic-job web控制台，可将编译之后的war放入tomcat等servlet容器中使用。</p>

<p><strong>elastic-job-example：</strong>使用例子。</p>

<p><strong>elastic-job-test：</strong>测试elastic-job使用的公用类，使用方无需关注。</p>
</li>
<li>
<p><strong>使用步骤</strong></p>

<p><strong>安装Java环境</strong></p>

<p>请使用JDK1.7及其以上版本。可参考<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>

<p><strong>安装Zookeeper</strong></p>

<p>请使用Zookeeper 3.4.6及其以上版本。可参考<a href="https://zookeeper.apache.org/doc/trunk/zookeeperStarted.html">https://zookeeper.apache.org/doc/trunk/zookeeperStarted.html</a></p>

<p><strong>安装Maven</strong></p>

<p>请使用Maven 3.0.4及其以上版本。可参考<a href="http://maven.apache.org/install.html">http://maven.apache.org/install.html</a></p>

<p><strong>编译elastic-job-platform和elastic-job</strong></p>
</li>
</ul>

<pre><code>  cd %elastic-job-source-folder%/elastic-job-platform
  mvn clean install
  cd %elastic-job-source-folder%
  mvn clean install
</code></pre>

<h2>
<a id="代码开发" class="anchor" href="#%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91" aria-hidden="true"><span class="octicon octicon-link"></span></a>代码开发</h2>

<p>提供3种作业类型，分别是OneOff, Perpetual和SequencePerpetual。需要继承相应的抽象类。</p>

<p>方法参数shardingContext包含作业配置，分片和运行时信息。可通过getShardingTotalCount(),getShardingItems()等方法分别获取分片总数，运行在本作业服务器的分片序列号集合等。</p>

<ul>
<li>
<p><strong>OneOff类型作业</strong></p>

<p>OneOff作业类型比较简单，需要继承AbstractOneOffElasticJob，该类只提供了一个方法用于覆盖，此方法将被定时执行。用于执行普通的定时任务，与Quartz原生接口相似，只是增加了弹性扩缩容和分片等功能。</p>
</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyElasticJob</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractOneOffElasticJob</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">process</span>(<span class="pl-smi">JobExecutionMultipleShardingContext</span> <span class="pl-v">context</span>) {
        <span class="pl-c">// do something by sharding items</span>
    }
}</pre></div>

<ul>
<li>
<p><strong>Perpetual类型作业</strong></p>

<p>Perpetual作业类型略为复杂，需要继承AbstractPerpetualElasticJob并可以指定返回值泛型，该类提供两个方法可覆盖，分别用于抓取和处理数据。可以获取数据处理成功失败次数等辅助监控信息。<strong>需要注意fetchData方法的返回值只有为null或长度为空时，作业才会停止执行，否则作业会一直运行下去。</strong>这点是参照TbSchedule的设计。Perpetual作业类型更适用于流式不间歇的数据处理。</p>

<p>作业执行时会将fetchData的数据传递给processData处理，其中processData得到的数据是通过多线程（线程池大小可配）拆分的。建议processData处理数据后，更新其状态，避免fetchData再次抓取到，从而使得作业永远不会停止。processData的返回值用于表示数据是否处理成功，抛出异常或者返回false将会在统计信息中归入失败次数，返回true则归入成功次数。</p>
</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyElasticJob</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractPerpetualElasticJob&lt;<span class="pl-smi">Foo</span>&gt;</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">List&lt;<span class="pl-smi">Foo</span>&gt;</span> <span class="pl-en">fetchData</span>(<span class="pl-smi">JobExecutionMultipleShardingContext</span> <span class="pl-v">context</span>) {
        <span class="pl-k">List&lt;<span class="pl-smi">Foo</span>&gt;</span> result <span class="pl-k">=</span> <span class="pl-c">// get data from database by sharding items</span>
        <span class="pl-k">return</span> result;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">boolean</span> <span class="pl-en">processData</span>(<span class="pl-smi">JobExecutionMultipleShardingContext</span> <span class="pl-v">context</span>, <span class="pl-smi">Foo</span> <span class="pl-v">data</span>) {
        <span class="pl-c">// process data</span>
        <span class="pl-k">return</span> <span class="pl-c1">true</span>;
    }
}</pre></div>

<ul>
<li>
<p><strong>SequencePerpetual类型作业</strong></p>

<p>SequencePerpetual作业类型和Perpetual作业类型极为相似，所不同的是Perpetual作业类型可以将获取到的数据多线程处理，但不会保证多线程处理数据的顺序。如：从2个分片共获取到100条数据，第1个分片40条，第2个分片60条，配置为两个线程处理，则第1个线程处理前50条数据，第2个线程处理后50条数据，无视分片项；SequencePerpetual类型作业则根据当前服务器所分配的分片项数量进行多线程处理，每个分片项使用同一线程处理，防止了同一分片的数据被多线程处理，从而导致的顺序问题。如：从2个分片共获取到100条数据，第1个分片40条，第2个分片60条，则系统自动分配两个线程处理，第1个线程处理第1个分片的40条数据，第2个线程处理第2个分片的60条数据。由于Perpetual作业可以使用多余分片项的任意线程数处理，所以性能调优的可能会优于SequencePerpetual作业。</p>
</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyElasticJob</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractSequencePerpetualElasticJob&lt;<span class="pl-smi">Foo</span>&gt;</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">List&lt;<span class="pl-smi">Foo</span>&gt;</span> <span class="pl-en">fetchData</span>(<span class="pl-smi">JobExecutionSingleShardingContext</span> <span class="pl-v">context</span>) {
        <span class="pl-k">List&lt;<span class="pl-smi">Foo</span>&gt;</span> result <span class="pl-k">=</span> <span class="pl-c">// get data from database by sharding items</span>
        <span class="pl-k">return</span> result;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">boolean</span> <span class="pl-en">processData</span>(<span class="pl-smi">JobExecutionSingleShardingContext</span> <span class="pl-v">context</span>, <span class="pl-smi">Foo</span> <span class="pl-v">data</span>) {
        <span class="pl-c">// process data</span>
        <span class="pl-k">return</span> <span class="pl-c1">true</span>;
    }
}</pre></div>

<h2>
<a id="作业配置" class="anchor" href="#%E4%BD%9C%E4%B8%9A%E9%85%8D%E7%BD%AE" aria-hidden="true"><span class="octicon octicon-link"></span></a>作业配置</h2>

<p>与Spring容器配合使用作业，可以将作业Bean配置为Spring Bean， 可在作业中通过依赖注入使用Spring容器管理的数据源等对象。可用placeholder占位符从属性文件中取值。</p>

<ul>
<li><strong>Spring命名空间配置</strong></li>
</ul>

<div class="highlight highlight-text-xml"><pre>&lt;?<span class="pl-ent">xml</span><span class="pl-e"> version</span>=<span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span><span class="pl-e"> encoding</span>=<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>?&gt;
&lt;<span class="pl-ent">beans</span> <span class="pl-e">xmlns</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.springframework.org/schema/beans<span class="pl-pds">"</span></span>
    <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">xsi</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="pl-pds">"</span></span>
    <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">reg</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.dangdang.com/schema/ddframe/reg<span class="pl-pds">"</span></span> 
    <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">job</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.dangdang.com/schema/ddframe/job<span class="pl-pds">"</span></span> 
    <span class="pl-e">xsi</span><span class="pl-e">:</span><span class="pl-e">schemaLocation</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.springframework.org/schema/beans </span>
<span class="pl-s">                        http://www.springframework.org/schema/beans/spring-beans.xsd </span>
<span class="pl-s">                        http://www.dangdang.com/schema/ddframe/reg </span>
<span class="pl-s">                        http://www.dangdang.com/schema/ddframe/reg/reg.xsd </span>
<span class="pl-s">                        http://www.dangdang.com/schema/ddframe/job </span>
<span class="pl-s">                        http://www.dangdang.com/schema/ddframe/job/job.xsd </span>
<span class="pl-s">                        <span class="pl-pds">"</span></span>&gt;
    <span class="pl-c">&lt;!--配置作业注册中心 --&gt;</span>
    &lt;<span class="pl-ent">reg</span><span class="pl-ent">:</span><span class="pl-ent">zookeeper</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> <span class="pl-e">serverLists</span>=<span class="pl-s"><span class="pl-pds">"</span> yourhost:2181<span class="pl-pds">"</span></span> <span class="pl-e">namespace</span>=<span class="pl-s"><span class="pl-pds">"</span>dd-job<span class="pl-pds">"</span></span> <span class="pl-e">baseSleepTimeMilliseconds</span>=<span class="pl-s"><span class="pl-pds">"</span>1000<span class="pl-pds">"</span></span> <span class="pl-e">maxSleepTimeMilliseconds</span>=<span class="pl-s"><span class="pl-pds">"</span>3000<span class="pl-pds">"</span></span> <span class="pl-e">maxRetries</span>=<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> /&gt;

    <span class="pl-c">&lt;!-- 配置作业A--&gt;</span>
    &lt;<span class="pl-ent">job</span><span class="pl-ent">:</span><span class="pl-ent">bean</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>oneOffElasticJob<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>xxx.MyOneOffElasticJob<span class="pl-pds">"</span></span> <span class="pl-e">regCenter</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> <span class="pl-e">cron</span>=<span class="pl-s"><span class="pl-pds">"</span>0/10 * * * * ?<span class="pl-pds">"</span></span>   <span class="pl-e">shardingTotalCount</span>=<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> <span class="pl-e">shardingItemParameters</span>=<span class="pl-s"><span class="pl-pds">"</span>0=A,1=B,2=C<span class="pl-pds">"</span></span> /&gt;

    <span class="pl-c">&lt;!-- 配置作业B--&gt;</span>
    &lt;<span class="pl-ent">job</span><span class="pl-ent">:</span><span class="pl-ent">bean</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>perpetualElasticJob<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>xxx.MyPerpetualElasticJob<span class="pl-pds">"</span></span> <span class="pl-e">regCenter</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> <span class="pl-e">cron</span>=<span class="pl-s"><span class="pl-pds">"</span>0/10 * * * * ?<span class="pl-pds">"</span></span> <span class="pl-e">shardingTotalCount</span>=<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> <span class="pl-e">shardingItemParameters</span>=<span class="pl-s"><span class="pl-pds">"</span>0=A,1=B,2=C<span class="pl-pds">"</span></span> <span class="pl-e">processCountIntervalSeconds</span>=<span class="pl-s"><span class="pl-pds">"</span>10<span class="pl-pds">"</span></span> <span class="pl-e">concurrentDataProcessThreadCount</span>=<span class="pl-s"><span class="pl-pds">"</span>10<span class="pl-pds">"</span></span> /&gt;
&lt;/<span class="pl-ent">beans</span>&gt;</pre></div>

<p><strong>job:bean命名空间属性详细说明</strong></p>

<table>
<tbody>
<tr>
<td><em>属性名</em></td>
<td><em>类型</em></td>
<td><em>是否必填</em></td>
<td><em>缺省值</em></td>
<td><em>描述</em></td>
</tr>
<tr>
<td>id</td>
<td>String</td>
<td>是</td>
<td></td>
<td>作业名称</td>
</tr>
<tr>
<td>class</td>
<td>String</td>
<td>是</td>
<td></td>
<td>作业实现类，需实现ElasticJob接口</td>
</tr>
<tr>
<td>regCenter</td>
<td>String</td>
<td>是</td>
<td></td>
<td>注册中心Bean的引用，需引用reg:zookeeper的声明</td>
</tr>
<tr>
<td>cron</td>
<td>String</td>
<td>是</td>
<td></td>
<td>cron表达式，用于配置作业触发时间</td>
</tr>
<tr>
<td>shardingTotalCount</td>
<td>int</td>
<td>是</td>
<td></td>
<td>作业分片总数</td>
</tr>
<tr>
<td>shardingItemParameters</td>
<td>String</td>
<td>否</td>
<td></td>
<td>分片序列号和个性化参数对照表<br>分片序列号和参数用等号分隔，多个键值对用逗号分隔<br>分片序列号从0开始，不可大于或等于作业分片总数<br>如：<br>0=a,1=b,2=c</td>
</tr>
<tr>
<td>jobParameter</td>
<td>String</td>
<td>否</td>
<td></td>
<td>作业自定义参数<br>可以配置多个相同的作业，但是用不同的参数作为不同的调度实例</td>
</tr>
<tr>
<td>monitorRuntime</td>
<td>boolean</td>
<td>否</td>
<td>true</td>
<td>监控作业运行时状态<br>每次作业执行时间和间隔时间均非常短的情况，建议不监控作业运行时状态以提升效率。因为是瞬时状态，所以无必要监控。请用户自行增加数据堆积监控。并且不能保证数据重复选取，应在作业中实现幂等性。<br>每次作业执行时间和间隔时间均较长短的情况，建议监控作业运行时状态，可保证数据不会重复选取。
</td>
</tr>
<tr>
<td>processCountIntervalSeconds</td>
<td>int</td>
<td>否</td>
<td>300</td>
<td>统计作业处理数据数量的间隔时间<br>单位：秒<br>对Perpetual和SequencePerpetual作业有效</td>
</tr>
<tr>
<td>concurrentDataProcessThreadCount</td>
<td>int</td>
<td>否</td>
<td>1</td>
<td>同时处理数据的并发线程数<br>不能小于1<br>仅Perpetual作业有效</td>
</tr>
<tr>
<td>fetchDataCount</td>
<td>int</td>
<td>否</td>
<td>0</td>
<td>每次抓取的数据量</td>
</tr>
<tr>
<td>failover</td>
<td>boolean</td>
<td>否</td>
<td>false</td>
<td>是否开启失效转移<br>仅monitorExecution开启，失效转移才有效</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>否</td>
<td></td>
<td>作业描述信息</td>
</tr>
<tr>
<td>disabled</td>
<td>boolean</td>
<td>否</td>
<td>false</td>
<td>作业是否禁止启动<br>可用于部署作业时，先禁止启动，部署结束后统一启动</td>
</tr>
<tr>
<td>overwrite</td>
<td>boolean</td>
<td>否</td>
<td>false</td>
<td>本地配置是否可覆盖注册中心配置<br>如果可覆盖，每次启动作业都以本地配置为准</td>
</tr>
</tbody>
</table>

<p><strong>reg:zookeeper命名空间属性详细说明</strong></p>

<table>
<tbody>
<tr>
<td><em>属性名</em></td>
<td><em>类型</em></td>
<td><em>是否必填</em></td>
<td><em>缺省值</em></td>
<td><em>描述</em></td>
</tr>
<tr>
<td>id</td>
<td>String</td>
<td>是</td>
<td></td>
<td>注册中心在Spring容器中的主键</td>
</tr>
<tr>
<td>serverLists</td>
<td>String</td>
<td>是</td>
<td></td>
<td>连接Zookeeper服务器的列表<br>包括IP地址和端口号<br>多个地址用逗号分隔<br>如: host1:2181,host2:2181</td>
</tr>
<tr>
<td>namespace</td>
<td>String</td>
<td>是</td>
<td></td>
<td>Zookeeper的命名空间</td>
</tr>
<tr>
<td>baseSleepTimeMilliseconds</td>
<td>int</td>
<td>是</td>
<td></td>
<td>等待重试的间隔时间的初始值<br>单位：毫秒</td>
</tr>
<tr>
<td>maxSleepTimeMilliseconds</td>
<td>int</td>
<td>是</td>
<td></td>
<td>等待重试的间隔时间的最大值<br>单位：毫秒</td>
</tr>
<tr>
<td>maxRetries</td>
<td>int</td>
<td>是</td>
<td></td>
<td>最大重试次数</td>
</tr>
<tr>
<td>sessionTimeoutMilliseconds</td>
<td>int</td>
<td>否</td>
<td>60000</td>
<td>会话超时时间<br>单位：毫秒</td>
</tr>
<tr>
<td>connectionTimeoutMilliseconds</td>
<td>int</td>
<td>否</td>
<td>15000</td>
<td>连接超时时间<br>单位：毫秒</td>
</tr>
<tr>
<td>digest</td>
<td>String</td>
<td>否</td>
<td>无权限验证</td>
<td>连接Zookeeper的权限令牌<br>缺省为不需要权限验证</td>
</tr>
</tbody>
</table>

<ul>
<li><strong>基于Spring但不使用命名空间</strong></li>
</ul>

<div class="highlight highlight-text-xml"><pre>    <span class="pl-c">&lt;!-- 配置作业注册中心 --&gt;</span>
    &lt;<span class="pl-ent">bean</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>com.dangdang.ddframe.reg.zookeeper.ZookeeperRegistryCenter<span class="pl-pds">"</span></span> <span class="pl-e">init-method</span>=<span class="pl-s"><span class="pl-pds">"</span>init<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">constructor-arg</span>&gt;
            &lt;<span class="pl-ent">bean</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>com.dangdang.ddframe.reg.zookeeper.ZookeeperConfiguration<span class="pl-pds">"</span></span>&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>serverLists<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>namespace<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>baseSleepTimeMilliseconds<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>maxSleepTimeMilliseconds<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>maxRetries<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
            &lt;/<span class="pl-ent">bean</span>&gt;
        &lt;/<span class="pl-ent">constructor-arg</span>&gt;
    &lt;/<span class="pl-ent">bean</span>&gt;
    <span class="pl-c">&lt;!-- 配置作业--&gt;</span>
    &lt;<span class="pl-ent">bean</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>xxxJob<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>com.dangdang.ddframe.job.spring.schedule.SpringJobController<span class="pl-pds">"</span></span> <span class="pl-e">init-method</span>=<span class="pl-s"><span class="pl-pds">"</span>init<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">ref</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> /&gt;
        &lt;<span class="pl-ent">constructor-arg</span>&gt;
            &lt;<span class="pl-ent">bean</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>com.dangdang.ddframe.job.api.JobConfiguration<span class="pl-pds">"</span></span>&gt;
                &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>jobName<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>xxxJob<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>jobClass<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>xxxDemoJob<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>shardingTotalCount<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>10<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>cron<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>0/10 * * * * ?<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>shardingItemParameters<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
            &lt;/<span class="pl-ent">bean</span>&gt;
        &lt;/<span class="pl-ent">constructor-arg</span>&gt;
    &lt;/<span class="pl-ent">bean</span>&gt;</pre></div>

<ul>
<li><strong>不使用Spring配置</strong></li>
</ul>

<p>如果不使用Spring框架，可以用如下方式启动作业。</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">import</span> <span class="pl-smi">com.dangdang.ddframe.job.api.JobConfiguration</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.dangdang.ddframe.job.schedule.JobInitializer</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.dangdang.ddframe.job.schedule.JobScheduler</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.dangdang.ddframe.reg.base.CoordinatorRegistryCenter</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.dangdang.ddframe.reg.zookeeper.ZookeeperConfiguration</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.dangdang.ddframe.reg.zookeeper.ZookeeperRegistryCenter</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">JobDemo</span> {

    <span class="pl-c">// 声明Zookeeper注册中心配置对象</span>
    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">ZookeeperConfiguration</span> zkConfig <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ZookeeperConfiguration</span>(<span class="pl-s"><span class="pl-pds">"</span>yourhost:2181<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>zkRegTestCenter<span class="pl-pds">"</span></span>, <span class="pl-c1">1000</span>, <span class="pl-c1">3000</span>, <span class="pl-c1">3</span>);

    <span class="pl-c">// 定义Zookeeper注册中心</span>
    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">CoordinatorRegistryCenter</span> regCenter <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ZookeeperRegistryCenter</span>(zkConfig);

    <span class="pl-c">// 声明作业配置对象</span>
    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">JobConfiguration</span> jobConfig <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">JobConfiguration</span>(<span class="pl-s"><span class="pl-pds">"</span>demoJob<span class="pl-pds">"</span></span>, <span class="pl-smi">DemoJob</span><span class="pl-k">.</span>class, <span class="pl-c1">3</span>, <span class="pl-s"><span class="pl-pds">"</span>0/1 * * * * ?<span class="pl-pds">"</span></span>);

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-k">final</span> <span class="pl-k">String</span>[] <span class="pl-v">args</span>) {
        <span class="pl-k">new</span> <span class="pl-smi">JobDemo</span>()<span class="pl-k">.</span>init();
    }

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">init</span>() {
        <span class="pl-c">// 连接注册中心</span>
        regCenter<span class="pl-k">.</span>init();
        <span class="pl-c">// 声明作业启动器</span>
        <span class="pl-smi">JobInitializer</span> jobInitializer <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">JobInitializer</span>(regCenter, jobConfig);
        <span class="pl-c">// 启动作业，主要是注册作业的信息</span>
        jobInitializer<span class="pl-k">.</span>init();
        <span class="pl-c">// 获取作业调度器实例</span>
        <span class="pl-smi">JobScheduler</span> jobScheduler <span class="pl-k">=</span> <span class="pl-smi">JobScheduler</span><span class="pl-k">.</span>getInstance();
        <span class="pl-c">// 添加作业到调度器</span>
        jobScheduler<span class="pl-k">.</span>addJob(<span class="pl-s"><span class="pl-pds">"</span>demoJob<span class="pl-pds">"</span></span>, jobInitializer);
        <span class="pl-c">// 启动所有作业</span>
        jobScheduler<span class="pl-k">.</span>scheduleAllJobs();
    }
}</pre></div>

<h2>
<a id="使用限制" class="anchor" href="#%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6" aria-hidden="true"><span class="octicon octicon-link"></span></a>使用限制</h2>

<ul>
<li>作业一旦启动成功后不能修改作业名称，如果修改名称则视为新的作业。</li>
<li>同一台作业服务器只能运行一个相同的作业实例，因为作业运行时是按照IP注册和管理的。</li>
<li>作业根据/etc/hosts文件获取IP地址，如果获取的IP地址是127.0.0.1而非真实IP地址，应正确配置此文件。</li>
<li>一旦有服务器波动，或者修改分片项，将会触发重新分片；触发重新分片将会导致运行中的Perpetual以及SequencePerpetual作业再执行完本次作业后不再继续执行，等待分片结束后再恢复正常。</li>
<li>开启monitorExecution才能实现分布式作业幂等性（即不会在多个作业服务器运行同一个分片）的功能，但monitorExecution对短时间内执行的作业（如每5秒一触发）性能影响较大，建议关闭并自行实现幂等性。</li>
<li>elastic-job没有自动删除作业服务器的功能，因为无法区分是服务器崩溃还是正常下线。所以如果要下线服务器，需要手工删除zookeeper中相关的服务器节点。由于直接删除服务器节点风险较大，暂时不考虑在运维平台增加此功能。</li>
</ul>

<h2>
<a id="运维平台" class="anchor" href="#%E8%BF%90%E7%BB%B4%E5%B9%B3%E5%8F%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>运维平台</h2>

<ul>
<li>
<p><strong>登录</strong></p>

<p>默认用户名和密码是<strong>root/root</strong>，可以通过修改conf\auth.properties文件修改默认登录用户名和密码。</p>
</li>
<li>
<p><strong>主要功能</strong></p>

<p>登录安全控制</p>

<p>注册中心管理</p>

<p>作业维度状态查看</p>

<p>服务器维度状态查看</p>

<p>快捷修改作业设置</p>

<p>控制作业暂停和恢复运行</p>
</li>
<li>
<p><strong>设计理念</strong></p>

<p>运维平台和elastic-job并无直接关系，是通过读取作业注册中心数据展现作业状态，或更新注册中心数据修改全局配置。</p>

<p>控制台只能控制作业本身是否运行，但不能控制作业进程的启停，因为控制台和作业本身服务器是完全分布式的，控制台并不能控制作业服务器。</p>
</li>
<li>
<p><strong>不支持项</strong></p>

<p>添加作业。因为作业都是在首次运行时自动添加，使用运维平台添加作业并无必要。</p>

<p>停止作业。即使删除了Zookeeper信息也不能真正停止作业的运行，还会导致运行中的作业出问题。</p>

<p>删除作业服务器。由于直接删除服务器节点风险较大，暂时不考虑在运维平台增加此功能。</p>
</li>
<li>
<p><strong>主要界面</strong></p>

<p>总览页</p>

<p><img src="http://static.oschina.net/uploads/space/2015/0914/215139_rVBi_719192.png" alt="总览页"></p>

<p>注册中心管理页</p>

<p><img src="http://static.oschina.net/uploads/space/2015/0914/215159_mbew_719192.png" alt="注册中心管理页"></p>

<p>作业详细信息页</p>

<p><img src="http://static.oschina.net/uploads/space/2015/0914/215232_Lj4d_719192.png" alt="作业详细信息页"></p>

<p>服务器详细信息页</p>

<p><img src="http://static.oschina.net/uploads/space/2015/0914/215302_d3iw_719192.png" alt="服务器详细信息页"></p>
</li>
</ul>

<h2>
<a id="实现原理" class="anchor" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" aria-hidden="true"><span class="octicon octicon-link"></span></a>实现原理</h2>

<ul>
<li>
<p><strong>弹性分布式实现</strong></p>

<ol>
<li><p>第一台服务器上线触发主服务器选举。主服务器一旦下线，则重新触发选举，选举过程中阻塞，只有主服务器选举完成，才会执行其他任务。</p></li>
<li><p>某作业服务器上线时会自动将服务器信息注册到注册中心，下线时会自动更新服务器状态。</p></li>
<li><p>主节点选举，服务器上下线，分片总数变更均更新重新分片标记。</p></li>
<li><p>定时任务触发时，如需重新分片，则通过主服务器分片，分片过程中阻塞，分片结束后才可执行任务。如分片过程中主服务器下线，则先选举主服务器，再分片。</p></li>
<li><p>通过4可知，为了维持作业运行时的稳定性，运行过程中只会标记分片状态，不会重新分片。分片仅可能发生在下次任务触发前。</p></li>
<li><p>每次分片都会按服务器IP排序，保证分片结果不会产生较大波动。</p></li>
<li><p>实现失效转移功能，在某台服务器执行完毕后主动抓取未分配的分片，并且在某台服务器下线后主动寻找可用的服务器执行任务。</p></li>
</ol>
</li>
<li>
<p><strong>注册中心数据结构</strong></p>

<p>注册中心在定义的命名空间下，创建作业名称节点，用于区分不同作业，所以作业一旦创建则不能修改作业名称，如果修改名称将视为新的作业。作业名称节点下又包含4个数据子节点，分别是config, servers, execution和leader。</p>

<p><strong>概览</strong></p>
</li>
</ul>

<p><img src="http://static.oschina.net/uploads/space/2015/0914/171533_1BOb_719192.png" alt="注册中心数据结构"></p>

<p><strong>config节点</strong></p>

<p>作业全局配置信息</p>

<table>
<tbody>
<tr>
<td><em>子节点名</em></td>
<td><em>临时节点</em></td>
<td><em>描述</em></td>
</tr>
<tr>
<td>jobClass</td>
<td>否</td>
<td>作业实现类名称</td>
</tr>
<tr>
<td>shardingTotalCount</td>
<td>否</td>
<td>作业分片总数</td>
</tr>
<tr>
<td>cron</td>
<td>否</td>
<td>作业启动时间的cron表达式</td>
</tr>
<tr>
<td>shardingItemParameters</td>
<td>否</td>
<td>分片序列号和个性化参数对照表</td>
</tr>
<tr>
<td>jobParameter</td>
<td>否</td>
<td>作业自定义参数</td>
</tr>
<tr>
<td>monitorExecution</td>
<td>否</td>
<td>监控作业执行时状态</td>
</tr>
<tr>
<td>processCountIntervalSeconds</td>
<td>否</td>
<td>统计作业处理数据数量的间隔时间</td>
</tr>
<tr>
<td>concurrentDataProcessThreadCount</td>
<td>否</td>
<td>同时处理数据的并发线程数</td>
</tr>
<tr>
<td>fetchDataCount</td>
<td>否</td>
<td>每次抓取的数据量</td>
</tr>
<tr>
<td>failover</td>
<td>否</td>
<td>是否开启失效转移</td>
</tr>
<tr>
<td>description</td>
<td>否</td>
<td>作业描述信息</td>
</tr>
</tbody>
</table>

<p><strong>servers节点</strong></p>

<p>作业服务器信息，子节点是作业服务器的IP地址。IP地址节点的子节点存储详细信息。同一台作业服务器只能运行一个相同的作业实例，因为作业运行时是按照IP注册和管理的。</p>

<table>
<tbody>
<tr>
<td><em>子节点名</em></td>
<td><em>临时节点</em></td>
<td><em>描述</em></td>
</tr>
<tr>
<td>hostName</td>
<td>否</td>
<td>作业服务器名称</td>
</tr>
<tr>
<td>status</td>
<td>是</td>
<td>作业服务器状态，分为READY和RUNNING<br>用于表示服务器在等待执行作业还是正在执行作业<br>如果status节点不存在则表示作业服务器未上线</td>
</tr>
<tr>
<td>disabled</td>
<td>否</td>
<td>作业服务器状态是否禁用<br>可用于部署作业时，先禁止启动，部署结束后统一启动</td>
</tr>
<tr>
<td>sharding</td>
<td>否</td>
<td>该作业服务器分到的作业分片项<br>多个分片项用逗号分隔<br>如：0,1,2代表该服务器执行第1，2，3片分片</td>
</tr>
<tr>
<td>processSuccessCount</td>
<td>否</td>
<td>统计一段时间内处理数据成功的数量<br>统计间隔可通过config\processCountIntervalSeconds配置</td>
</tr>
<tr>
<td>processFailureCount</td>
<td>否</td>
<td>统计一段时间内处理数据失败的数量<br>统计间隔可通过config\processCountIntervalSeconds配置</td>
</tr>
<tr>
<td>stoped</td>
<td>否</td>
<td>停止作业的标记</td>
</tr>
</tbody>
</table>

<p><strong>execution节点</strong></p>

<p>执行时信息，子节点是分片项序号，从零开始，至分片总数减一。分片项序号的子节点存储详细信息。可通过配置config\monitorExecution为false关闭记录作业执行时信息。</p>

<table>
<tbody>
<tr>
<td><em>子节点名</em></td>
<td><em>临时节点</em></td>
<td><em>描述</em></td>
</tr>
<tr>
<td>running</td>
<td>是</td>
<td>分片项正在运行的状态<br>如果没有此节点，并且没有completed节点，表示该分片未运行</td>
</tr>
<tr>
<td>completed</td>
<td>否</td>
<td>分片项运行完成的状态<br>下次作业开始执行时会清理</td>
</tr>
<tr>
<td>failover</td>
<td>是</td>
<td>如果该分片项被失效转移分配给其他作业服务器，则此节点值记录执行此分片的作业服务器IP</td>
</tr>
<tr>
<td>lastBeginTime</td>
<td>否</td>
<td>该分片项最近一次的开始执行时间</td>
</tr>
<tr>
<td>nextFireTime</td>
<td>否</td>
<td>该分片项下次作业触发时间</td>
</tr>
<tr>
<td>lastCompleteTime</td>
<td>否</td>
<td>该分片项最近一次的结束执行时间</td>
</tr>
</tbody>
</table>

<p><strong>leader节点</strong></p>

<p>作业服务器主节点信息，分为election，sharding和execution三个子节点。分别用于主节点选举，分片和作业执行时处理。</p>

<p>leader节点是内部使用的节点，如果对作业框架原理不感兴趣，可不关注此节点。</p>

<table>
<tbody>
<tr>
<td><em>子节点名</em></td>
<td><em>临时节点</em></td>
<td><em>描述</em></td>
</tr>
<tr>
<td>election\host</td>
<td>是</td>
<td>主节点服务器IP地址<br>一旦该节点被删除将会触发重新选举<br>重新选举的过程中一切主节点相关的操作都将阻塞</td>
</tr>
<tr>
<td>election\latch</td>
<td>否</td>
<td>主节点选举的分布式锁<br>为curator的分布式锁使用</td>
</tr>
<tr>
<td>sharding\necessary</td>
<td>否</td>
<td>是否需要重新分片的标记<br>如果分片总数变化，或作业服务器节点上下线或启用/禁用，以及主节点选举，会触发设置重分片标记<br>作业在下次执行时使用主节点重新分片，且中间不会被打断<br>作业执行时不会触发分片</td>
</tr>
<tr>
<td>sharding\processing</td>
<td>是</td>
<td>主节点在分片时持有的节点<br>如果有此节点，所有的作业执行都将阻塞，直至分片结束<br>主节点分片结束或主节点崩溃会删除此临时节点</td>
</tr>
<tr>
<td>execution\necessary</td>
<td>否</td>
<td>是否需要修正作业执行时分片项信息的标记<br>如果分片总数变化，会触发设置修正分片项信息标记<br>作业在下次执行时会增加或减少分片项数量</td>
</tr>
<tr>
<td>execution\cleaning</td>
<td>是</td>
<td>主节点在清理上次作业运行时状态时所持有的节点<br>每次开始新作业都需要清理上次运行完成的作业信息<br>如果有此节点，所有的作业执行都将阻塞，直至清理结束<br>主节点分片结束或主节点崩溃会删除此临时节点</td>
</tr>
<tr>
<td>failover\items\分片项</td>
<td>否</td>
<td>一旦有作业崩溃，则会向此节点记录<br>当有空闲作业服务器时，会从此节点抓取需失效转移的作业项</td>
</tr>
<tr>
<td>failover\items\latch</td>
<td>否</td>
<td>分配失效转移分片项时占用的分布式锁<br>为curator的分布式锁使用</td>
</tr>
</tbody>
</table>

<ul>
<li>
<p><strong>流程图</strong></p>

<p>作业启动</p>

<p><img src="http://static.oschina.net/uploads/space/2015/0914/181007_yQ7b_719192.jpg" alt="作业启动"></p>

<p>作业执行</p>

<p><img src="http://static.oschina.net/uploads/space/2015/0914/181025_OSzr_719192.png" alt="作业执行"></p>
</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dangdangdotcom/elastic-job">Elastic-job</a> is maintained by <a href="https://github.com/dangdangdotcom">dangdangdotcom</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("elastic-job");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
