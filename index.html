<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Elastic-job by dangdangdotcom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Elastic-job</h1>
      <h2 class="project-tagline">Elastic-Job is a distributed scheduled job framework, based on Quartz and Curator.</h2>
      <a href="https://github.com/dangdangdotcom/elastic-job" class="btn">View on GitHub</a>
      <a href="https://github.com/dangdangdotcom/elastic-job/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dangdangdotcom/elastic-job/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>
<a id="elastic-job---distributed-scheduled-job-solution" class="anchor" href="#elastic-job---distributed-scheduled-job-solution" aria-hidden="true"><span class="octicon octicon-link"></span></a>Elastic-Job - distributed scheduled job solution</h2>

<p>Elastic-Job是ddframe中dd-job的作业模块中分离出来的分布式弹性作业框架。去掉了和dd-job中的监控和ddframe接入规范部分。</p>

<p>ddframe其他模块也有可独立开源的部分，之前当当曾开源过dd-soa的基石模块DubboX。</p>

<p>elastic-job和ddframe关系见下图</p>

<p><img src="http://static.oschina.net/uploads/space/2015/0915/181703_2fxp_719192.jpg" alt="ddframe演进图"></p>

<h2>
<a id="主要贡献者" class="anchor" href="#%E4%B8%BB%E8%A6%81%E8%B4%A1%E7%8C%AE%E8%80%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>主要贡献者</h2>

<ul>
<li>张亮 <a href="http://www.dangdang.com/">当当网</a> <a href="mailto:zhangliang@dangdang.com">zhangliang@dangdang.com</a>
</li>
<li>曹昊 <a href="http://www.dangdang.com/">当当网</a> <a href="mailto:caohao@dangdang.com">caohao@dangdang.com</a>
</li>
<li>江树建 <a href="http://www.dangdang.com/">当当网</a> <a href="mailto:jiangshujian@dangdang.com">jiangshujian@dangdang.com</a>
</li>
</ul>

<h2>
<a id="elastic-job主要功能" class="anchor" href="#elastic-job%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD" aria-hidden="true"><span class="octicon octicon-link"></span></a>Elastic-Job主要功能</h2>

<ul>
<li>
<strong>定时任务：</strong> 基于成熟的定时任务作业框架Quartz cron表达式执行定时任务。</li>
<li>
<strong>作业注册中心：</strong> 基于Zookeeper和其客户端Curator实现的全局作业注册控制中心。用于注册，控制和协调分布式作业执行。</li>
<li>
<strong>作业分片：</strong> 将一个任务分片成为多个小任务项在多服务器上同时执行。</li>
<li>
<strong>弹性扩容缩容：</strong> 运行中的作业服务器崩溃，或新增加n台作业服务器，作业框架将在下次作业执行前重新分片，不影响当前作业执行。</li>
<li>
<strong>支持多种作业执行模式：</strong> 支持OneOff，Perpetual和SequencePerpetual三种作业模式。</li>
<li>
<strong>失效转移：</strong> 运行中的作业服务器崩溃不会导致重新分片，只会在下次作业启动时分片。启用失效转移功能可以在本次作业执行过程中，监测其他作业服务器空闲，抓取未完成的孤儿分片项执行。</li>
<li>
<strong>运行时状态收集：</strong> 监控作业运行时状态，统计最近一段时间处理的数据成功和失败数量，记录作业上次运行开始时间，结束时间和下次运行时间。</li>
<li>
<strong>作业停止，恢复和禁用：</strong>用于操作作业启停，并可以禁止某作业运行（上线时常用）。</li>
<li>
<strong>被错过执行的作业重触发：</strong>自动记录错过执行的作业，并在上次作业完成后自动触发。可参考Quartz的misfire。</li>
<li>
<strong>多线程快速处理数据：</strong>使用多线程处理抓取到的数据，提升吞吐量。</li>
<li>
<strong>幂等性：</strong>重复作业任务项判定，不重复执行已运行的作业任务项。由于开启幂等性需要监听作业运行状态，对瞬时反复运行的作业对性能有较大影响。</li>
<li>
<strong>容错处理：</strong>作业服务器与Zookeeper服务器通信失败则立即停止作业运行，防止作业注册中心将失效的分片分项配给其他作业服务器，而当前作业服务器仍在执行任务，导致重复执行。</li>
<li>
<strong>Spring支持：</strong>支持spring容器，自定义命名空间，支持占位符。</li>
<li>
<strong>运维平台：</strong>提供运维界面，可以管理作业和注册中心。</li>
</ul>

<h2>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Start</h2>

<ul>
<li>
<p><strong>目录结构说明</strong></p>

<p><strong>elastic-job-platform：</strong>maven版本依赖模块，编译elastic-job主项目前需先编译本项目。</p>

<p><strong>elastic-job-core：</strong>elastic-job核心模块，只通过Quartz和Curator就可执行分布式作业。</p>

<p><strong>elastic-job-spring：</strong>elastic-job对spring支持的模块，包括命名空间，依赖注入，占位符等。</p>

<p><strong>elastic-job-console：</strong>elastic-job web控制台，可将编译之后的war放入tomcat等servlet容器中使用。</p>

<p><strong>elastic-job-example：</strong>使用例子。</p>

<p><strong>elastic-job-test：</strong>测试elastic-job使用的公用类，使用方无需关注。</p>
</li>
<li>
<p><strong>使用步骤</strong></p>

<p><strong>安装Java环境</strong></p>

<p>请使用JDK1.7及其以上版本。可参考<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>

<p><strong>安装Zookeeper</strong></p>

<p>请使用Zookeeper 3.4.6及其以上版本。可参考<a href="https://zookeeper.apache.org/doc/trunk/zookeeperStarted.html">https://zookeeper.apache.org/doc/trunk/zookeeperStarted.html</a></p>

<p><strong>安装Maven</strong></p>

<p>请使用Maven 3.0.4及其以上版本。可参考<a href="http://maven.apache.org/install.html">http://maven.apache.org/install.html</a></p>

<p><strong>编译elastic-job-platform和elastic-job</strong></p>
</li>
</ul>

<pre><code>  cd %elastic-job-source-folder%/elastic-job-platform
  mvn clean install
  cd %elastic-job-source-folder%
  mvn clean install
</code></pre>
      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dangdangdotcom/elastic-job">Elastic-job</a> is maintained by <a href="https://github.com/dangdangdotcom">dangdangdotcom</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("elastic-job");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
